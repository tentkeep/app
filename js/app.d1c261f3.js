(function(e){function t(t){for(var a,r,l=t[0],s=t[1],c=t[2],u=0,d=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i={app:0},o=[];function l(e){return s.p+"js/"+({EntryDetail:"EntryDetail",authorized:"authorized",gallery:"gallery","create-gallery":"create-gallery"}[e]||e)+"."+{EntryDetail:"e4550b75",authorized:"89a04634","chunk-56a06a5b":"7590a84a",gallery:"eb569584","create-gallery":"23079173","chunk-1baf7b1e":"d8ca1156","chunk-2533a872":"712e081f","chunk-74e16e6d":"7e4151b7","chunk-e5ddb436":"8a4ea518","chunk-fe8f261e":"6fc827d3","chunk-10393126":"8a8633c1","chunk-2d0dd04c":"e93de694","chunk-4894e4b4":"5c28192c","chunk-4ae01715":"8d53ca22","chunk-a00bf1a8":"e207594d","chunk-a306c314":"45809de6","chunk-f172a9ac":"8ce94fdd"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={authorized:1,"chunk-56a06a5b":1,gallery:1,"create-gallery":1,"chunk-1baf7b1e":1,"chunk-2533a872":1,"chunk-74e16e6d":1,"chunk-e5ddb436":1,"chunk-fe8f261e":1,"chunk-10393126":1,"chunk-4894e4b4":1,"chunk-4ae01715":1,"chunk-a00bf1a8":1,"chunk-a306c314":1,"chunk-f172a9ac":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({EntryDetail:"EntryDetail",authorized:"authorized",gallery:"gallery","create-gallery":"create-gallery"}[e]||e)+"."+{EntryDetail:"31d6cfe0",authorized:"adf0210b","chunk-56a06a5b":"cacdac20",gallery:"31361c8a","create-gallery":"eb17e59d","chunk-1baf7b1e":"0d16cd71","chunk-2533a872":"f1f6c837","chunk-74e16e6d":"f5c6e8c1","chunk-e5ddb436":"85ad9219","chunk-fe8f261e":"9fd5fe1e","chunk-10393126":"550cf733","chunk-2d0dd04c":"31d6cfe0","chunk-4894e4b4":"122ce2db","chunk-4ae01715":"fbd5a8db","chunk-a00bf1a8":"7905cf04","chunk-a306c314":"2f5e8b8f","chunk-f172a9ac":"c5776046"}[e]+".css",i=s.p+a,o=document.getElementsByTagName("link"),l=0;l<o.length;l++){var c=o[l],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===i))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){c=d[l],u=c.getAttribute("data-href");if(u===a||u===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],f.parentNode.removeChild(f),n(o)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=l(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}i[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},2090:function(e,t,n){"use strict";var a=n("d894"),r=n.n(a);r.a},"3daf":function(e,t,n){},4898:function(e,t,n){"use strict";var a=n("6eb1"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("25f0");var a,r=n("5530"),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-fill flex-column",attrs:{id:"app"}},[n("video-player"),n("router-view",{staticClass:"flex-one scrolly"}),n("audio-player")],1)},l=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.nowPlaying?n("div",{staticClass:"bg-hi shadow-primary2-top z2"},[n("div",{staticClass:"progress-bar",style:{width:e.progress+"%"}}),n("div",{staticClass:"flex-row align-center"},[n("div",{staticClass:"flex-one noscroll p1"},[n("p",{staticClass:"font-1 lines1"},[e._v(e._s(e.nowPlayingTitle))])]),n("p",{staticClass:"time-label"},[e._v(e._s(e.nowPlayingRemaining))]),e.isPlaying?n("div",{staticClass:"font5 p1 muted-color",on:{click:e.pause}},[n("i",{staticClass:"far fa-pause-circle"})]):e._e(),e.isPlaying?e._e():n("div",{staticClass:"font5 p1 muted-color",on:{click:e.resume}},[n("i",{staticClass:"far fa-play-circle"})])])]):e._e()},c=[],u=(n("ac1f"),n("5319"),n("2f62")),d=n("60a4"),f=function(){return new Promise((function(e,t){if(window.MusicKit)a=window.MusicKit.getInstance(),e(a);else{var n=document.createElement("script");n.src="https://js-cdn.music.apple.com/musickit/v1/musickit.js",document.head.appendChild(n),document.addEventListener("musickitloaded",(function(){d["a"].log("loaded MusicKit"),window.MusicKit.configure({developerToken:"eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlpHNjM5SjNKMjYifQ.eyJpYXQiOjE2MDA3NTA3NzYsImV4cCI6MTYxNjMwMjc3NiwiaXNzIjoiTDIyM0ZNOVRMQSJ9.nRUGN7B5wllQvMCGrO1KuIYTWOJVepQr8UU0hlhcIJFPjm0oRyeBRJ0b99fgSqcK79nZfvpNlcMLmcRec07T6w",app:{name:"Tentkeep",build:"1.0.0"}}),a=window.MusicKit.getInstance(),e(a)}))}}))};f();var p=function(e){var t=e.services.apple.id,n={id:t,kind:e.services.apple.kind,attributes:{previews:[{url:e.preview}],url:e.services.apple.url},container:{id:t}};return console.log("FFF",n),new window.MusicKit.MediaItem(n)},y={playNow:function(e){var t=p(e);a.player.queue.append({items:[t]}),a.player.skipToNextItem()},pause:function(){a.pause()},play:function(){a.play()},isPlaying:function(){return a.isPlaying},addEventListener:function(e,t){a.addEventListener(e,t)}},h=function(e){return new Date(1e3*(e||0)).toISOString().substr(11,8).replace(/(00:0|00:)/,"")},m={name:"AudioPlayer",data:function(){return{player:null,nowPlaying:null,nowPlayingDuration:null,nowPlayingRemainingDuration:null,nowPlayingRemaining:null,currentTime:null,progress:0,audio:null,isPlaying:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])(["currentAudio"])),{},{nowPlayingTitle:function(){return this.nowPlaying?this.nowPlaying.item.title:""}}),watch:{currentAudio:function(){this.pause(),this.beginPlaying(this.currentAudio)}},methods:Object(r["a"])(Object(r["a"])({},Object(u["b"])(["saveUserItemActivity"])),{},{resume:function(){this.player&&this.player.play()},pause:function(){if(this.nowPlaying){var e=this.nowPlaying,t=e.item,n=e.type,a=e.identifier,r=a.galleryId,i=a.galleryEntryId;this.saveUserItemActivity({galleryId:r,galleryEntryId:i,galleryEntryType:n,galleryEntryItemId:t.id,activity:{currentTime:this.currentTime,isComplete:this.nowPlayingRemainingDuration<5}})}this.player&&this.player.pause()},beginPlaying:function(e){this.nowPlaying=null,this.nowPlaying=e;var t=this.nowPlaying,n=t.item,a=t.type;"podcast"===a&&this.playUrl(n.url),"music"===a&&(console.log(n),n.services.apple&&this.playMusickit(n))},updateProgress:function(e,t){this.currentTime=e;var n=e/t;this.progress=Math.round(1e3*n)/10,this.nowPlayingRemaining="-".concat(h(t-e)),this.nowPlayingRemainingDuration=t-e},playUrl:function(e){var t=this;this.audio=new Audio(e),this.player=this.audio,this.audio.addEventListener("durationchange",(function(e){t.nowPlayingDuration=h(t.audio.duration)})),this.audio.addEventListener("play",(function(e){t.isPlaying=!0})),this.audio.addEventListener("pause",(function(e){t.isPlaying=!1})),this.audio.addEventListener("timeupdate",(function(e){t.updateProgress(t.audio.currentTime,t.audio.duration)})),this.audio.play()},playMusickit:function(e){var t=this;this.player=y,y.playNow(e),y.addEventListener("playbackDurationDidChange",(function(e){return console.log(e.duration)||(t.nowPlayingDuration=h(e.duration))})),y.addEventListener("playbackTimeDidChange",(function(e){t.updateProgress(e.currentPlaybackTime,e.currentPlaybackDuration)})),y.addEventListener("playbackStateDidChange",(function(e){t.isPlaying=2===e.state}))}})},g=m,v=(n("aea7"),n("2877")),b=Object(v["a"])(g,s,c,!1,null,"33276b6f",null),w=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"scale"}},[e.nowPlaying?n("div",{staticClass:"video-player-container relative"},[n("div",{staticClass:"video-control-bar"},[n("div",{staticClass:"flex-one"}),n("button",{on:{click:function(t){e.nowPlaying=null}}},[n("i",{staticClass:"fas fa-times font1"})])]),n("div",{staticClass:"video-player"},[e.youtubeVideoId?n("div",{staticClass:"flex-column align-center",attrs:{id:"youtube-player"}}):e._e()])]):e._e()])},P=[],_=(n("96cf"),n("1da1"));n("caad"),n("2532");function I(){return new Promise((function(e,t){if(window.YT)e();else{var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.head.appendChild(n),window.onYouTubeIframeAPIReady=function(){d["a"].log("loaded YouTube API"),e()}}}))}function C(e){e.target.playVideo()}var x=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return r=window.YT,i=new r.Player(t,{height:"".concat(window.innerHeight/4,"px"),width:"100%",videoId:n,events:{onReady:C,onStateChange:function(e){a.onPause&&[r.PlayerState.PAUSED,r.PlayerState.ENDED].includes(e.data)&&a.onPause(i)}}}),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E={getYouTubePlayer:x},j={name:"VideoPlayer",data:function(){return{nowPlaying:null,youtubeVideoId:null,player:null,youtubePlayer:null,nowPlayingDuration:null,nowPlayingRemaining:null,progress:0,progressTime:"0:00",isPlaying:!1}},computed:Object(r["a"])({},Object(u["c"])(["currentVideo"])),watch:{currentVideo:function(){this.pause(),this.beginPlaying(this.currentVideo)}},methods:Object(r["a"])(Object(r["a"])({},Object(u["b"])(["saveUserItemActivity"])),{},{resume:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},didPause:function(){if(this.youtubePlayer){var e=this.nowPlaying,t=e.item,n=e.type,a=e.identifier,r=a.galleryId,i=a.galleryEntryId,o=this.youtubePlayer.getCurrentTime(),l=this.youtubePlayer.getDuration()-o;this.saveUserItemActivity({galleryId:r,galleryEntryId:i,galleryEntryType:n,galleryEntryItemId:t.id,activity:{currentTime:o,isComplete:l<10}})}},beginPlaying:function(e){this.nowPlaying=e;var t=this.nowPlaying,n=t.item,a=t.type;"youtube"===a&&this.playYoutube(n.detail.videoId)},playYoutube:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.youtubeVideoId=e,t.youtubePlayer){n.next=7;break}return n.next=4,E.getYouTubePlayer("youtube-player",e,{onPause:t.didPause});case 4:t.youtubePlayer=n.sent,n.next=9;break;case 7:a=0,t.youtubePlayer.loadVideoById(e,a,"large");case 9:case"end":return n.stop()}}),n)})))()}})},O=j,T=(n("9596"),n("f424"),Object(v["a"])(O,k,P,!1,null,"ae0a62e2",null)),A=T.exports,S={name:"App",components:{AudioPlayer:w,VideoPlayer:A}},G=S,D=(n("034f"),n("5c64"),Object(v["a"])(G,o,l,!1,null,null,null)),R=D.exports,U=n("8c4f"),z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home v-fill flex-column"},[n("div",{staticClass:"flex-one scrolly"},[n("div",{staticClass:"p2 p0-bottom flex-row align-center m1-bottom",attrs:{id:"titlebar"}},[n("h2",{staticClass:"flex-one primary"},[e._v("Explore")]),e.isSignedIn?n("p",{on:{click:function(t){return e.$router.push("/mine")}}},[n("i",{staticClass:"far fa-user"})]):e._e(),e.isSignedIn?e._e():n("button",{staticClass:"button-alt",on:{click:function(t){return e.$router.push({name:"SignIn"})}}},[e._v("Sign in")])]),n("div",{staticClass:"explore p1"},[n("gallery-grid",{attrs:{galleries:e.exploreGalleries}})],1),e._m(0),n("div",{staticClass:"flex-row flex-wrap flex-center p1 p0-top"},e._l(["COVID","love","masks","theology","justice","racism","hate","gospel","fear","anxiety"],(function(t){return n("p",{key:t,staticClass:"bg-secondary hi p1 rounded m1-right m1-bottom shadow-primary2",on:{click:function(n){return e.alert("Not implemented. This should trigger a search of content using the word: "+t)}}},[e._v(" "+e._s(t)+" ")])})),0),n("div",{staticClass:"recently-added m1-top p1"},[n("h3",{staticClass:"primary m1-bottom"},[e._v("New")]),n("recently-added")],1)])])},M=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p1-left p1-top"},[n("h3",{staticClass:"primary m1-bottom"},[e._v("Trending")])])}],N=(n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gallery-grid"},e._l(e.galleries,(function(t){return n("div",{key:t.id,staticClass:"item",on:{click:function(n){return e.goToGallery(t)}}},[n("gallery-image",{staticClass:"gallery-image",attrs:{galleryId:t.id,size:"29vw",maxSize:"250px",tinyImage:t.tiny_image}}),n("div",{staticClass:"description"},[n("p",{},[e._v(e._s(t.title))])])],1)})),0)}),L=[],V=n("973e"),F={name:"GalleryGrid",props:["galleries"],data:function(){return{galleriesPerRow:3,currentScrollOffset:0,rowWidth:200}},components:{GalleryImage:V["a"]},watch:{galleries:function(){var e=this;this.$nextTick((function(){e.rowWidth=e.$el.querySelectorAll(".item")[1].offsetLeft}))}},methods:{}},$=F,Y=(n("68b7"),Object(v["a"])($,N,L,!1,null,"7687d7e5",null)),B=Y.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recently-added h-fill scrollx"},[n("div",{staticClass:"recently-added-flow"},e._l(e.items,(function(t){return n("div",{key:t.id,staticClass:"recently-added-item-wrapper",on:{click:function(n){return e.activate(t)}}},[n("div",{staticClass:"recently-added-item v-fill"},[n("div",{staticClass:"item-image",style:{"background-image":"url("+(t.image||t.gallery_entry_image)+")"}}),n("div",{staticClass:"flex-one p1 noscroll"},[n("p",{staticClass:"item-info"},[n("i",{class:e.typeLabel(t)}),e._v(" "+e._s(t.gallery_entry_title))]),n("p",{staticClass:"item-title"},[e._v(e._s(e.htmlDecode(t.title)))])])])])})),0)])},K=[],W=n("970e"),q={name:"RecentlyAdded",data:function(){return{items:[]}},methods:{typeLabel:function(e){switch(e.entry_type){case"etsy":return["fas","fa-shopping-cart"];case"music":return["fas","fa-music"];case"podcast":return["fas","fa-podcast"];case"wordpress":return["fas","fa-book"];case"youtube":return["fas","fa-video"];default:throw new Error("should be exhaustive")}},activate:function(e){switch(e.entry_type){case"etsy":return this.openWebPage(e.url);case"music":return this.playAudio(e,e.entry_type,{galleryId:e.gallery_id,galleryEntryId:e.gallery_entry_id});case"podcast":return this.playAudio(e,e.entry_type,{galleryId:e.gallery_id,galleryEntryId:e.gallery_entry_id});case"wordpress":return this.openWebPage(e.url);case"youtube":return this.playVideo(e,e.entry_type,{galleryId:e.gallery_id,galleryEntryId:e.gallery_entry_id});default:throw new Error("should be exhaustive")}}},mounted:function(){var e=this;W["a"].getRecentlyAddedGalleryEntryItems().then((function(t){e.items=t}))}},H=q,Q=(n("77b4"),Object(v["a"])(H,J,K,!1,null,"14ab50e6",null)),X=Q.exports,Z={name:"Home",data:function(){return{lastFetch:null,exploreGalleries:[],filters:["music","video","podcast","book","shopping-cart","palette"],filter:null}},computed:Object(r["a"])({},Object(u["c"])(["isSignedIn"])),components:{GalleryGrid:B,RecentlyAdded:X},methods:{fetchGalleries:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=9e5,e.lastFetch&&!((new Date).getTime()-e.lastFetch.getTime()>n)){t.next=6;break}return t.next=4,W["a"].getGalleries();case 4:e.exploreGalleries=t.sent,e.lastFetch=new Date;case 6:case"end":return t.stop()}}),t)})))()},galleryImageUrl:function(e){return W["a"].getGalleryImageUrl(e)},setFilter:function(e){this.filter=this.filter===e?null:e}},mounted:function(){this.fetchGalleries()}},ee=Z,te=(n("6015"),Object(v["a"])(ee,z,M,!1,null,"300bcf2c",null)),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine"},[n("div",{staticClass:"flex-row p2"},[n("router-link",{staticClass:"font-2 muted-color uppercase",attrs:{to:"/"}},[n("i",{staticClass:"fas fa-chevron-left"})])],1),n("div",{staticClass:"p2"},[n("div",{staticClass:"flex-row m2-bottom"},[n("h3",{staticClass:"p2-right m2-right border-right-muted2"},[e._v("My Galleries")]),n("button",{staticClass:"button-alt",on:{click:function(t){return e.$router.push("/gallery/create")}}},[e._v("Create a Gallery")])]),n("gallery-grid",{attrs:{galleries:e.galleries}})],1)])},re=[],ie={name:"Mine",data:function(){return{galleries:null}},components:{GalleryGrid:B},methods:Object(r["a"])({},Object(u["b"])(["getGalleriesForUser"])),mounted:function(){var e=this;this.getGalleriesForUser().then((function(t){e.galleries=t}))}},oe=ie,le=(n("a931"),Object(v["a"])(oe,ae,re,!1,null,"88323dd2",null)),se=le.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-fill flex-row align-center flex-center",attrs:{id:"signin"}},[n("div",{staticClass:"card"},[n("h2",{staticClass:"m2-bottom primary text-center"},[e._v("Sign in to Tentkeep")]),e._m(0),n("hr",{staticClass:"m4-top m4-bottom"}),n("div",{staticClass:"flex-column align-center"},[n("div",{on:{click:e.signInWithApple}},[n("img",{attrs:{src:"https://appleid.cdn-apple.com/appleid/button?height=50&width=300",alt:""}})]),n("form",{directives:[{name:"show",rawName:"v-show",value:e.isDev,expression:"isDev"}],staticClass:"beb",attrs:{action:e.devAuthUrl,method:"post"}},[n("input",{attrs:{name:"id_token"},domProps:{value:e.jwt}}),n("button",[e._v("Go")])])])])])},ue=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m2-bottom text-center line160"},[n("p",[e._v("Choose your favorites")]),n("p",[e._v("Track your progress")]),n("p",[e._v("Share and promote content")])])}],de={name:"SignIn",data:function(){return{jwt:window.jwtDev}},computed:{isDev:function(){return Object({NODE_ENV:"production",VUE_APP_API_URL:"https://api.tentkeep.com/v1",BASE_URL:"/"}).VUE_APP_IS_DEV},devAuthUrl:function(){return"".concat("https://api.tentkeep.com/v1","/auth/authorized")}},methods:{signInWithApple:function(){window.location="".concat("https://api.tentkeep.com/v1","/auth/authorize/apple")}}},fe=de,pe=(n("4898"),Object(v["a"])(fe,ce,ue,!1,null,"0c16ac97",null)),ye=pe.exports;i["a"].use(U["a"]);var he=[{path:"/",name:"Home",component:ne},{path:"/mine",name:"Mine",component:se},{path:"/signin",name:"SignIn",component:ye},{path:"/authorized",name:"authorized",component:function(){return n.e("authorized").then(n.bind(null,"fa26"))}},{path:"/gallery/create",name:"gallery-create",component:function(){return n.e("create-gallery").then(n.bind(null,"404e"))}},{path:"/gallery/:gallery",name:"gallery",props:!0,component:function(){return Promise.all([n.e("chunk-56a06a5b"),n.e("gallery")]).then(n.bind(null,"0d77"))}},{path:"/item/:item",name:"EntryDetail",props:!0,component:function(){return n.e("EntryDetail").then(n.bind(null,"e4c5"))}}],me=new U["a"]({routes:he}),ge=me,ve=n("28aa");function be(e,t){var n=t.maxSize,a=t.outputType,r=void 0===a?"blob":a,i=t.outputMime,o=void 0===i?"image/jpeg":i;return new Promise((function(t){if(!e)throw new Error("no input file provided");if(!n)throw new Error("no maxSize provided");if(!window.FileReader)throw new Error("The File APIs are not fully supported in this browser.");var a=new FileReader;a.onload=function(e){var a=document.createElement("img");a.onload=function(e){var i=document.createElement("canvas"),l=i.getContext("2d");l.drawImage(a,0,0);var s=a.width,c=a.height;console.log("WH1",s,c),s>c?s>n&&(c*=n/s,s=n):c>n&&(s*=n/c,c=n),i.width=s,i.height=c;var u=i.getContext("2d");u.drawImage(a,0,0,s,c),"blob"===r?i.toBlob((function(e){t(e)}),o):t(i.toDataURL(o))},a.src=e.target.result},a.readAsDataURL(e)}))}var we={resizeImage:be};i["a"].use(u["a"]);var ke={tokens:null,user:null,currentAudio:null,currentVideo:null},Pe=Object(ve["a"])(ke),_e=Pe.getters,Ie=Pe.mutations,Ce=Pe.actions;_e.isSignedIn=function(e){return!!e.tokens},Ce.saveGallery=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,i,o,l,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,a=t.state,r=n.title,i=n.image,o=Ee(a),e.next=5,we.resizeImage(i,{maxSize:10,outputType:"dataURL"});case 5:return l=e.sent,e.next=8,W["a"].saveGallery(o,{title:r,tiny_image:l});case 8:return s=e.sent,e.next=11,we.resizeImage(i,{maxSize:900});case 11:return c=e.sent,e.next=14,W["a"].saveGalleryImage(o,s.id,c);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce.saveGalleryEntry=function(e,t){var n=e.state;return n.tokens?W["a"].saveGalleryEntry(Ee(n),t):Promise.reject(new Error("Unauthorized"))},Ce.getGalleriesForUser=function(e){var t=e.state;return t.tokens?W["a"].getGalleriesForUser(Ee(t)):Promise.resolve({})},Ce.getGalleryUserRole=function(e,t){var n=e.state;return n.tokens?W["a"].getGalleryUserRole(Ee(n),t):Promise.resolve({})},Ce.saveUserItemActivity=function(e,t){var n=e.state;return n.tokens?W["a"].saveUserItemActivity(Ee(n),t):Promise.resolve({})};var xe=new u["a"].Store({state:ke,getters:_e,mutations:Ie,actions:Ce}),Ee=function(e){return e.tokens.access_token};i["a"].config.productionTip=!1,i["a"].mixin({methods:Object(r["a"])(Object(r["a"])({},Object(u["b"])(["setCurrentVideo","setCurrentAudio"])),{},{alert:function(e){window.alert(e)},htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent},goToGallery:function(e){e.toString=function(){return e.id},this.$router.push({name:"gallery",params:{gallery:e}})},showGalleryEntryDetail:function(e){e.toString=function(){return e.id},this.$router.push({name:"EntryDetail",params:{entry:e}})},openWebPage:function(e){window.open(e)},playAudio:function(e,t,n){this.setCurrentAudio({item:e,type:t,identifier:n})},playVideo:function(e,t,n){this.setCurrentVideo({item:e,type:t,identifier:n})}})}),new i["a"]({router:ge,store:xe,render:function(e){return e(R)}}).$mount("#app")},"5c64":function(e,t,n){"use strict";var a=n("d32a"),r=n.n(a);r.a},6015:function(e,t,n){"use strict";var a=n("9926"),r=n.n(a);r.a},"60a4":function(e,t,n){"use strict";t["a"]={log:function(){var e;(e=console).log.apply(e,arguments)},error:function(){var e;console.trace(),(e=console).error.apply(e,arguments)}}},6329:function(e,t,n){},"68b7":function(e,t,n){"use strict";var a=n("76b5"),r=n.n(a);r.a},"6eb1":function(e,t,n){},"76b5":function(e,t,n){},"77b4":function(e,t,n){"use strict";var a=n("b5fb"),r=n.n(a);r.a},"85ec":function(e,t,n){},9596:function(e,t,n){"use strict";var a=n("3daf"),r=n.n(a);r.a},"970e":function(e,t,n){"use strict";(function(e){n("99af"),n("d3b7"),n("25f0");var a=n("53ca"),r=n("15fd"),i=n("5530"),o=(n("96cf"),n("1da1")),l=n("60a4"),s="https://api.tentkeep.com/v1";t["a"]={exchangeAccessCode:function(e){var t={method:"post",headers:{"Content-Type":"application/json"},body:{grant_type:"authorization_code",code:e}};return c("".concat(s,"/auth/token"),t)},getPodcastSummary:function(e){return c("".concat(s,"/proxy/rss/podcast-summary?feed=").concat(e))},getGallery:function(e){return c("".concat(s,"/galleries/").concat(e))},getGalleries:function(){return c("".concat(s,"/galleries"))},getRecentlyAddedGalleryEntryItems:function(){return c("".concat(s,"/gallery-entry-items/recent"))},getGalleriesForUser:function(e){return c("".concat(s,"/me/galleries"),{headers:f(e)})},getGalleryImageUrl:function(e){return"".concat(s,"/galleries/").concat(e,"/image")},getGalleryEntries:function(e){return c("".concat(s,"/galleries/").concat(e,"/entries"))},getGalleryUserRole:function(e,t){return c("".concat(s,"/me/galleries/").concat(t),{headers:f(e)})},saveGallery:function(e,t){return c("".concat(s,"/galleries"),{method:"post",headers:p(e),body:t})},saveGalleryImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,a,r){var o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={galleryId:a,name:"gallery-image",contentType:"image/*"},t.next=3,c("".concat(s,"/content/prepare"),{method:"post",headers:p(n),body:o});case 3:return l=t.sent,u=JSON.parse(e.from(l.id,"hex").toString("utf-8")),t.abrupt("return",fetch(u.url,Object(i["a"])(Object(i["a"])({},u.options),{},{body:r})).then(d));case 6:case"end":return t.stop()}}),t)})));function n(e,n,a){return t.apply(this,arguments)}return n}(),saveGalleryEntry:function(e,t){var n=t.galleryId,a=Object(r["a"])(t,["galleryId"]);return c("".concat(s,"/galleries/").concat(n,"/entries"),{method:"post",headers:p(e),body:a})},saveUserItemActivity:function(e,t){return c("".concat(s,"/me/activity/item"),{method:"post",headers:p(e),body:t})},searchEtsyShops:function(e){return c("".concat(s,"/proxy/etsy/shops?q=").concat(e))},searchMusicArtists:function(e){return c("".concat(s,"/proxy/music/artists?q=").concat(e))},searchPodcasts:function(e){return c("https://itunes.apple.com/search?entity=podcast&limit=20&term=".concat(e))}};var c=function(e,t){return u(t),fetch(e,t).then(d).then((function(e){return e.json()}))},u=function(e){e&&"object"===Object(a["a"])(e.body)&&(e.body=JSON.stringify(e.body))},d=function(e){if(e.status>=400)throw l["a"].error("Received status: ".concat(e.status)),new Error("Failed request: "+e.status);return e},f=function(e){return{Authorization:"Bearer ".concat(e)}},p=function(e){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}}).call(this,n("b639").Buffer)},"973e":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gallery-image",style:{"background-image":"url("+e.imageUrl+")",width:e.size||"80px","max-width":e.maxSize}})},r=[],i=(n("96cf"),n("1da1")),o=n("970e"),l={name:"GalleryImage",props:["galleryId","tinyImage","size","maxSize"],data:function(){return{fullImageUrl:null}},computed:{imageUrl:function(){return this.fullImageUrl||this.tinyImage}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Image,n.onload=function(){e.fullImageUrl=n.src},t.next=4,o["a"].getGalleryImageUrl(e.galleryId);case 4:n.src=t.sent;case 5:case"end":return t.stop()}}),t)})))()}},s=l,c=(n("2090"),n("2877")),u=Object(c["a"])(s,a,r,!1,null,"63106d89",null);t["a"]=u.exports},9926:function(e,t,n){},a931:function(e,t,n){"use strict";var a=n("becc"),r=n.n(a);r.a},aea7:function(e,t,n){"use strict";var a=n("6329"),r=n.n(a);r.a},b5fb:function(e,t,n){},becc:function(e,t,n){},d32a:function(e,t,n){},d894:function(e,t,n){},e44c:function(e,t,n){},f424:function(e,t,n){"use strict";var a=n("e44c"),r=n.n(a);r.a}});
//# sourceMappingURL=app.d1c261f3.js.map