{"version":3,"sources":["webpack:///./src/views/gallery-entry-add/Music.vue?a86a","webpack:///src/views/gallery-entry-add/Music.vue","webpack:///./src/views/gallery-entry-add/Music.vue?1c42","webpack:///./src/views/gallery-entry-add/Music.vue","webpack:///./src/views/gallery-entry-add/Music.vue?7c90","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","saveEntry","attrs","_v","directives","name","rawName","value","expression","domProps","target","composing","artistName","search","searchResults","length","_e","_l","artist","key","id","class","selected","selectedArtist","artistSelected","firstAlbumImage","_s","attributes","firstAlbumName","artistId","staticRenderFns","data","typeAheadTimer","methods","clearTimeout","setTimeout","api","firstAlbum","$emit","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-3af50a4a.8dd7090d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p2\"},[_c('form',{staticClass:\"v-fill flex-column\",on:{\"submit\":function($event){$event.preventDefault();return _vm.saveEntry($event)}}},[_c('label',{staticClass:\"primary font-2\",attrs:{\"for\":\"artistName\"}},[_vm._v(\"*Artist name:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.artistName),expression:\"artistName\"}],staticClass:\"input m1-top\",attrs:{\"name\":\"artistName\",\"type\":\"text\",\"placeholder\":\"artist name\"},domProps:{\"value\":(_vm.artistName)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.artistName=$event.target.value},_vm.search]}}),_c('transition',{attrs:{\"name\":\"fade-in\"}},[(_vm.searchResults)?_c('div',{staticClass:\"scrolly border-primary shadow-primary3 m1-h\"},[(_vm.searchResults.length === 0)?_c('p',[_vm._v(\"No artists found\")]):_vm._e(),_vm._l((_vm.searchResults),function(artist){return _c('div',{key:artist.id,staticClass:\"artist-result\",class:{ selected: _vm.selectedArtist === artist },on:{\"click\":function($event){return _vm.artistSelected(artist)}}},[_c('img',{staticClass:\"artist-image\",attrs:{\"src\":_vm.firstAlbumImage(artist)}}),_c('div',{staticClass:\"artist-description\"},[_c('p',{staticClass:\"primary\"},[_vm._v(_vm._s(artist.attributes.name))]),_c('p',{staticClass:\"muted-color font-2\"},[_vm._v(\"Latest: \"),_c('span',{staticClass:\"muted2\"},[_vm._v(_vm._s(_vm.firstAlbumName(artist)))])])])])})],2):_vm._e()]),_c('button',{staticClass:\"button add-button m2-top\",attrs:{\"disabled\":!_vm.artistId}},[_vm._v(\"Add\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"p2\">\n    <form @submit.prevent=\"saveEntry\" class=\"v-fill flex-column\">\n      <label for=\"artistName\" class=\"primary font-2\">*Artist name:</label>\n      <input\n        name=\"artistName\"\n        type=\"text\"\n        v-model=\"artistName\"\n        class=\"input m1-top\"\n        placeholder=\"artist name\"\n        @input=\"search\" />\n\n      <transition name=\"fade-in\">\n      <div v-if=\"searchResults\" class=\"scrolly border-primary shadow-primary3 m1-h\">\n        <p v-if=\"searchResults.length === 0\">No artists found</p>\n        <div v-for=\"artist in searchResults\"\n          :key=\"artist.id\"\n          class=\"artist-result\"\n          :class=\"{ selected: selectedArtist === artist }\"\n          @click=\"artistSelected(artist)\"\n        >\n          <img :src=\"firstAlbumImage(artist)\" class=\"artist-image\" />\n          <div class=\"artist-description\">\n            <p class=\"primary\">{{ artist.attributes.name }}</p>\n            <p class=\"muted-color font-2\">Latest: <span class=\"muted2\">{{ firstAlbumName(artist) }}</span></p>\n          </div>\n        </div>\n      </div>\n      </transition>\n\n      <button class=\"button add-button m2-top\" :disabled=\"!artistId\">Add</button>\n    </form>\n\n  </div>\n</template>\n\n<script>\nimport api from '@/js/api'\nimport { tryGet } from '@/js/common'\n\nexport default {\n  name: 'AddMusicArtist',\n  data () {\n    return {\n      artistName: null,\n      artistId: null,\n      searchResults: null,\n      selectedArtist: null,\n      typeAheadTimer: null\n    }\n  },\n  methods: {\n    search () {\n      if (this.artistName.length > 2) {\n        clearTimeout(this.typeAheadTimer)\n        this.typeAheadTimer = setTimeout(() => {\n          api.searchMusicArtists(this.artistName)\n            .then(r => { this.searchResults = r.results.artists.data })\n        }, 700)\n      }\n    },\n    firstAlbum (artist) {\n      return (artist.relationships.albums.data[0] || { attributes: { artwork: {} } })\n    },\n    firstAlbumName (artist) {\n      const album = this.firstAlbum(artist)\n      return tryGet(() => album.attributes.name, '')\n    },\n    firstAlbumImage (artist) {\n      const album = this.firstAlbum(artist)\n      return tryGet(() => album.attributes.artwork.url, '').replace(/{w}|{h}/g, '100')\n    },\n    artistSelected (artist) {\n      this.artistId = artist.id\n      this.selectedArtist = artist\n    },\n    saveEntry () {\n      this.$emit('submit', { entryType: 'music', details: { artistId: this.artistId } })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/app\";\n\n.add-button {\n  @extend .m3-top;\n}\n\n$row-height: 46px;\n\n.artist-result {\n  @extend .flex-row;\n  @extend .align-center;\n  padding: 8px 0 8px 0;\n  @extend .relative;\n  @extend .border-bottom-muted3;\n  @extend .pointer;\n  transition: border .1s;\n  &.selected {\n    @extend .shadow-primary2;\n    @extend .border-primary2;\n    border-width: 3px;\n  }\n  &:last-child {\n    margin-bottom: 0;\n    border-bottom: none;\n  }\n}\n.artist-image {\n  @extend .square;\n  @extend .shadow-primary3;\n  margin-left: 4px;\n  border-radius: 2px;\n  width: $row-height;\n  min-width: $row-height;\n}\n.artist-description {\n  @extend .noscroll;\n  margin-left: 12px;\n  max-height: $row-height;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Music.vue?vue&type=template&id=e9359dfc&scoped=true&\"\nimport script from \"./Music.vue?vue&type=script&lang=js&\"\nexport * from \"./Music.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Music.vue?vue&type=style&index=0&id=e9359dfc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e9359dfc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music.vue?vue&type=style&index=0&id=e9359dfc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music.vue?vue&type=style&index=0&id=e9359dfc&lang=scss&scoped=true&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}