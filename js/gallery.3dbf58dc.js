(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gallery"],{"0413":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item-row",on:{click:function(e){return t.playAudio(t.item,"podcast",t.identifier)}}},[n("div",{staticClass:"flex-one p1-right lines1"},[n("p",{staticClass:"lines1"},[t._v(t._s(t.item.title))]),n("p",{staticClass:"muted2 font-2"},[t._v(t._s(t.date(t.item)))])])])},s=[],r={name:"PodcastRow",props:["item","identifier"],methods:{date:function(t){return new Date(t.date).toLocaleDateString("en-US",{month:"short",year:"numeric",day:"numeric"})}}},a=r,l=n("2877"),c=Object(l["a"])(a,i,s,!1,null,null,null);e["a"]=c.exports},"0d77":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gallery",on:{scroll:t.onScroll}},[n("router-link",{staticClass:"fixed z3 uppercase primary font-3",attrs:{to:"/"}},[n("div",{staticClass:"close-button"},[n("i",{staticClass:"fas fa-chevron-left"})])]),t.isLoadingGallery?t._e():n("div",[n("div",{staticClass:"banner-wrapper"},[n("div",{staticClass:"banner-image p1 bg-hi shadow-primary2",style:t.bannerImageStyles},[n("gallery-image",{staticClass:"shadow-primary2",attrs:{galleryId:t.Gallery.id,size:"60vw",maxSize:"300px"}})],1)]),n("div",{staticClass:"relative z1 p2-bottom"},[n("gallery-titlebar",{attrs:{title:t.Gallery.title},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t.isLoadingGalleryEntries||t.hasEntries?t._e():n("div",{staticClass:"flex-column align-center"},[t._m(0)]),t._l(t.entries,(function(e){return n("div",{key:e.created_at,staticClass:"gallery-entry"},[n(t.componentForEntry(e),{tag:"component",attrs:{entry:e,filter:t.query}})],1)})),t.canAddContent?n("div",{staticClass:"flex-column align-center m2 p2-top border-top-primary"},[n("button",{staticClass:"button",on:{click:function(e){t.addingContent=!0}}},[t._v("Add content")]),n("hr",{staticClass:"h-fill opacity30"}),n("button",{staticClass:"button bg-warning",on:{click:t.confirmDeletion}},[n("i",{staticClass:"fas fa-trash-alt"}),t._v(" Delete")])]):t._e()],2),n("modal",{model:{value:t.addingContent,callback:function(e){t.addingContent=e},expression:"addingContent"}},[n("gallery-entry-add",{attrs:{gallery:t.Gallery},on:{done:t.galleryEntryAddDone}})],1),n("modal",{model:{value:t.showDeleteConfirmation,callback:function(e){t.showDeleteConfirmation=e},expression:"showDeleteConfirmation"}},[n("div",{staticClass:"bg-hi p3 rounded"},[n("h2",{staticClass:"bold text-center warning"},[t._v("Caution!")]),n("p",{staticClass:"text-center line180"},[t._v(" Are you sure you want to delete "),n("br"),t._v(" the "),n("span",{staticClass:"bold primary"},[t._v(t._s(t.Gallery.title))]),t._v(" gallery "),n("br"),t._v(" and all of it's content? ")]),n("div",{staticClass:"flex-row flex-center m4-top"},[n("button",{staticClass:"button bg-warning m2-right",on:{click:t.deleteGalleryConfirmed}},[t._v("Delete")]),n("button",{staticClass:"button",on:{click:function(e){t.showDeleteConfirmation=!1}}},[t._v("Cancel")])])])])],1)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-center p2 rounded primary"},[t._v(" There is no content "),n("br"),t._v("in this gallery. ")])}],r=(n("caad"),n("d3b7"),n("ac1f"),n("5319"),n("ddb0"),n("96cf"),n("1da1")),a=n("5530"),l=n("973e"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gallery-titlebar"},[n("div",{staticClass:"flex-row p1"},[n("div",{staticClass:"button-space"}),n("p",{staticClass:"flex-one text-center primary bold font2"},[t._v(t._s(t.title))]),n("div",{staticClass:"button-space flex-bottom"},[t.isSearching?t._e():n("button",{staticClass:"button-icon",on:{click:t.startSearch}},[n("i",{staticClass:"fas fa-search"})])])]),n("transition",{attrs:{name:"fade-in"}},[t.isSearching?n("div",{staticClass:"search flex-row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search-input",attrs:{name:"query",type:"text",placeholder:"search",autocomplete:"off"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("button",{staticClass:"search-close",on:{click:t.clearSearch}},[n("i",{staticClass:"fas fa-times"})])]):t._e()])],1)},o=[],u={name:"GalleryTitlebar",props:["title"],data:function(){return{isSearching:!1,query:null}},watch:{query:function(){this.$emit("input",this.query)}},methods:{startSearch:function(){var t=this;this.isSearching=!0,this.$nextTick((function(){t.$el.querySelector("input[name=query]").focus()}))},clearSearch:function(){this.query=null,this.$el.querySelector("input[name=query]").focus()}}},d=u,f=(n("f8b1"),n("2877")),m=Object(f["a"])(d,c,o,!1,null,"0003483a",null),h=m.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade-in"}},[t.value?n("div",{staticClass:"modal"},[n("div",{staticClass:"modal-back",on:{click:t.dismiss}}),n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[t._t("default")],2),n("div",{staticClass:"z1 m2-bottom"},[n("button",{staticClass:"h-fill border-primary3 bg-primary3 p1 hi uppercase",on:{click:t.dismiss}},[t._v("Close")])])])]):t._e()])},p=[],v={name:"Modal",props:["value"],methods:{dismiss:function(){this.$emit("input",!1)}}},g=v,C=(n("f95a"),Object(f["a"])(g,y,p,!1,null,"b6823122",null)),b=C.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gallery-entry-add v-fill flex-column"},[n("div",{staticClass:"p2"},[t.addEntryType?n("p",[n("a",{staticClass:"muted2 p2-right",on:{click:function(e){t.addEntryType=null}}},[n("i",{staticClass:"fas fa-chevron-left"})]),t._v(" "+t._s(t.contentTypeHeader)+" : "),n("span",{staticClass:"primary"},[t._v(t._s(t.gallery.title))])]):n("p",[t._v("Add content to "),n("span",{staticClass:"primary"},[t._v(t._s(t.gallery.title))])])]),n("hr",{staticStyle:{margin:"0 8px 0 8px"}}),n(t.addEntryComponent,{tag:"component",staticClass:"flex-one scrolly",on:{submit:t.saveEntry},model:{value:t.addEntryType,callback:function(e){t.addEntryType=e},expression:"addEntryType"}})],1)},w=[],x=n("2f62"),E={name:"GalleryEntryAdd",props:["gallery"],data:function(){return{addEntryType:null}},computed:{contentTypeHeader:function(){switch(this.addEntryType){case"etsy":return"Etsy";case"music":return"Music";case"podcast":return"Podcast";case"wordpress":return"Wordpress";case"youtube":return"YouTube";default:return""}},addEntryComponent:function(){switch(this.addEntryType){case"saving":return function(){return n.e("chunk-2d0dd04c").then(n.bind(null,"8031"))};case"etsy":return function(){return n.e("chunk-f172a9ac").then(n.bind(null,"623f"))};case"music":return function(){return n.e("chunk-61c0ca10").then(n.bind(null,"2e86"))};case"podcast":return function(){return n.e("chunk-4ae01715").then(n.bind(null,"8f42"))};case"wordpress":return function(){return n.e("chunk-10393126").then(n.bind(null,"7faf"))};case"youtube":return function(){return n.e("chunk-4894e4b4").then(n.bind(null,"d6c8"))};default:return function(){return n.e("chunk-a306c314").then(n.bind(null,"b6f3"))}}}},methods:Object(a["a"])(Object(a["a"])({},Object(x["b"])(["saveGalleryEntry"])),{},{saveEntry:function(t){var e=this;this.addEntryType="saving",this.saveGalleryEntry(Object(a["a"])({galleryId:this.gallery.id},t)).then((function(t){e.addEntryType=null,e.$emit("done",t)}))}})},k=E,G=Object(f["a"])(k,_,w,!1,null,"e596b184",null),D=G.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}]},[n("div",{staticClass:"flex-row align-center m1-bottom",on:{click:function(e){return t.showGalleryEntryDetail(t.entry)}}},[n("div",[n("img",{staticClass:"shop-image",attrs:{src:t.entry.image}})]),n("div",{staticClass:"flex-one m1-left"},[n("h3",{staticClass:"primary"},[t._v(t._s(t.entry.title))]),n("p",{staticClass:"muted2 font-2"},[t._v("Etsy")])]),t._m(0)]),n("div",{staticClass:"flex-row flex-wrap flex-center"},t._l(t.items,(function(e){return n("div",{key:e.id,staticClass:"listing",on:{click:function(n){return t.openWebPage(e.url)}}},[n("div",{staticClass:"flex-column align-center"},[n("img",{staticClass:"listing-img",attrs:{src:e.image}})]),n("p",{staticClass:"listing-title"},[t._v(t._s(t.htmlDecode(e.title)))])])})),0)])},T=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p1 muted3"},[n("i",{staticClass:"fas fa-chevron-right"})])}],$=(n("a4d3"),n("e01a"),n("4de4"),n("fb6a"),n("2532"),{name:"EtsyMedium",props:["entry","filter"],computed:{items:function(){if(this.filter){var t=function(t){return t.toLowerCase()},e=t(this.filter);return this.entry.items.filter((function(n){return t(n.title).includes(e)||t(n.description).includes(e)})).slice(0,4)}return this.entry.items.slice(0,4)},hide:function(){return this.filter&&0===this.items.length}},methods:{htmlDecode:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}}}),q=$,O=(n("dbd0"),Object(f["a"])(q,S,T,!1,null,"6cefaa9d",null)),R=O.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}]},[n("div",{staticClass:"p1-bottom m2-bottom",on:{click:function(e){return t.showGalleryEntryDetail(t.entry)}}},[n("div",{staticClass:"flex-row align-center"},[n("h2",{staticClass:"flex-one primary bold"},[n("i",{staticClass:"fas fa-rss music-icon"}),t._v(" "+t._s(t.entry.title))]),t._m(0)]),n("div",{staticClass:"p1-top m3-h border-bottom-muted3"})]),t._l(t.items,(function(e){return n("div",{key:e.id,staticClass:"album-row"},[n("div",{staticClass:"flex-row m1-bottom"},[n("div",[n("img",{staticClass:"album-image",attrs:{src:e.image}})]),n("div",{staticClass:"flex-one p1-left"},[n("p",{staticClass:"primary bold"},[t._v(t._s(e.title))]),n("p",{staticClass:"muted-color font-3"},[t._v(t._s(t.albumType(e))+" • "+t._s(t.albumRelease(e)))]),n("p",{staticClass:"p1-top m2-right m1-left opacity50 border-bottom-muted3"})])]),n("div",{staticClass:"track-region"},t._l(e.detail.tracks,(function(e){return n("div",{key:e.id,staticClass:"item-row",on:{click:function(n){return t.playAudio(e,"music",t.identifier)}}},[t._m(1,!0),n("p",[t._v(t._s(e.title))])])})),0)])}))],2)},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p1 muted3"},[n("i",{staticClass:"fas fa-chevron-right"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m1-right"},[n("i",{staticClass:"far fa-play-circle primary3 opacity60"})])}],A=n("3470"),M={name:"Music",props:["entry","filter"],mixins:[A["a"]],computed:{items:function(){if(this.filter){var t=function(t){return t.toLowerCase()},e=t(this.filter);return this.entry.items.filter((function(n){return t(n.title).includes(e)})).slice(0,3)}return this.entry.items.slice(0,3)},hide:function(){return this.filter&&0===this.items.length}},methods:{albumType:function(t){return t.detail.isSingle?"Single":"Album"},albumRelease:function(t){return new Date(t.date).toLocaleDateString("en-US",{month:"short",year:"numeric"})}}},I=M,P=(n("9556"),Object(f["a"])(I,j,L,!1,null,"f4be6016",null)),H=P.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}]},[n("div",{staticClass:"flex-row align-center m1-bottom",on:{click:function(e){return t.showGalleryEntryDetail(t.entry)}}},[n("div",[n("img",{staticClass:"podcast-image",attrs:{src:t.entry.image}})]),n("h3",{staticClass:"flex-one primary m1-left"},[t._v(t._s(t.entry.title))]),t._m(0)]),t._l(t.items,(function(e){return n("podcast-row",{key:e.id,attrs:{item:e,identifier:t.identifier}})}))],2)},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p1 muted3"},[n("i",{staticClass:"fas fa-chevron-right"})])}],U=n("0413"),F={name:"PodcastMedium",props:["entry","filter"],components:{PodcastRow:U["a"]},mixins:[A["a"]],computed:{items:function(){if(this.filter){var t=function(t){return t.toLowerCase()},e=t(this.filter);return this.entry.items.filter((function(n){return t(n.title).includes(e)||t(n.description).includes(e)})).slice(0,3)}return this.entry.items.slice(0,3)},hide:function(){return this.filter&&0===this.items.length}}},Y=F,W=(n("2dae"),Object(f["a"])(Y,N,z,!1,null,"e93da96a",null)),J=W.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}]},[n("div",{staticClass:"flex-row align-center m1-bottom",on:{click:function(e){return t.showGalleryEntryDetail(t.entry)}}},[n("div",{staticClass:"flex-one m1-left"},[n("h3",{staticClass:"primary"},[n("span",{staticClass:"muted2 uppercase font-2 border-right-muted3 p1-right m1-right"},[t._v("Posts")]),t._v(t._s(t.entry.title))])]),t._m(0)]),t._l(t.items,(function(e){return n("div",{key:e.date,staticClass:"item-row",on:{click:function(n){return t.show(e)}}},[n("div",{staticClass:"square v-fill m1-right"},[n("img",{staticClass:"v-fill square",attrs:{src:e.image}})]),e.image?t._e():n("div",{staticClass:"m1-right"},[n("i",{staticClass:"fab fa-readme primary3 opacity60"})]),n("div",{staticClass:"flex-one p1-right lines1"},[n("p",{staticClass:"lines1"},[t._v(t._s(t.htmlDecode(e.title)))]),n("p",{staticClass:"muted2 font-2"},[t._v(t._s(t.date(e)))])])])}))],2)},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p1 muted3"},[n("i",{staticClass:"fas fa-chevron-right"})])}],Q={name:"Wordpress",props:["entry","filter"],computed:{items:function(){if(this.filter){var t=function(t){return t.toLowerCase()},e=t(this.filter);return this.entry.items.filter((function(n){return t(n.title).includes(e)||t(n.description).includes(e)||t(n.categories).includes(e)||t(n.author).includes(e)})).slice(0,3)}return this.entry.items.slice(0,3)},hide:function(){return this.filter&&0===this.items.length}},methods:{htmlDecode:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent},date:function(t){return new Date(t.date).toLocaleDateString("en-US",{month:"short",year:"numeric",day:"numeric"})},show:function(t){window.open(t.url)}}},V=Q,X=(n("59f5"),Object(f["a"])(V,B,K,!1,null,"a6533ca6",null)),Z=X.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}]},[n("div",{staticClass:"flex-row align-center m1-bottom",on:{click:function(e){return t.showGalleryEntryDetail(t.entry)}}},[n("div",[n("img",{staticClass:"video-image",attrs:{src:t.entry.image}})]),n("div",{staticClass:"flex-one m1-left"},[n("h3",{staticClass:"primary"},[t._v(t._s(t.entry.title))]),n("p",{staticClass:"muted2 font-2"},[t._v("YouTube")])]),t._m(0)]),t._l(t.items,(function(e){return n("you-tube-row",{key:e.id,attrs:{item:e,identifier:t.identifier}})}))],2)},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p1 muted3"},[n("i",{staticClass:"fas fa-chevron-right"})])}],nt=n("9c8e"),it={name:"YouTube",props:["entry","filter"],components:{YouTubeRow:nt["a"]},mixins:[A["a"]],computed:{items:function(){if(this.filter){var t=function(t){return t.toLowerCase()},e=t(this.filter);return this.entry.items.filter((function(n){return t(n.title).includes(e)||t(n.description).includes(e)})).slice(0,3)}return this.entry.items.slice(0,3)},hide:function(){return this.filter&&0===this.items.length}}},st=it,rt=(n("d39b"),Object(f["a"])(st,tt,et,!1,null,"1dc1d154",null)),at=rt.exports,lt=n("970e"),ct={name:"Gallery",props:["gallery"],data:function(){return{Gallery:null,isLoadingGallery:!0,isLoadingGalleryEntries:!0,entries:[],query:null,userRole:null,scrollRatio:0,addingContent:!1,showDeleteConfirmation:!1}},components:{GalleryImage:l["a"],GalleryTitlebar:h,Modal:b,GalleryEntryAdd:D},computed:{hasEntries:function(){return this.entries&&this.entries.length>0},bannerImageStyles:function(){return{transform:"scale(".concat(1+this.scrollRatio,")"),opacity:1-this.scrollRatio}},isOwner:function(){return"owner"===this.userRole},canAddContent:function(){return["curator","owner"].includes(this.userRole)}},methods:Object(a["a"])(Object(a["a"])({},Object(x["b"])(["getGalleryUserRole","deleteGallery"])),{},{getEntries:function(){var t=this;lt["a"].getGalleryEntries(this.Gallery.id).then((function(e){t.isLoadingGalleryEntries=!1,t.entries=e}))},componentForEntry:function(t){switch(t.entry_type){case"etsy":return R;case"music":return H;case"podcast":return J;case"wordpress":return Z;case"youtube":return at;default:throw new Error("should be exhaustive")}},onScroll:function(t){var e=this.$el.querySelector(".banner-image"),n=t.target.scrollTop,i=n/e.offsetHeight;this.scrollRatio=i},galleryEntryAddDone:function(t){this.addingContent=!1,t&&this.getEntries()},confirmDeletion:function(){this.showDeleteConfirmation=!0},deleteGalleryConfirmed:function(){var t=this;this.deleteGallery(this.Gallery.id).then((function(e){t.$router.replace({name:"Home"})})).catch((function(e){t.alert(e.message)}))},ensureGalleryFetched:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t.Gallery){e.next=5;break}return t.isLoadingGallery=!0,e.next=4,lt["a"].getGallery(t.Gallery);case 4:t.Gallery=e.sent;case 5:t.isLoadingGallery=!1;case 6:case"end":return e.stop()}}),e)})))()}}),mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.Gallery=t.gallery,e.next=3,t.ensureGalleryFetched();case 3:t.getEntries(),t.getGalleryUserRole(t.Gallery.id).then((function(e){e.is_owner?t.userRole="owner":e.is_member&&(t.userRole="member")}));case 5:case"end":return e.stop()}}),e)})))()}},ot=ct,ut=(n("8f08"),Object(f["a"])(ot,i,s,!1,null,"e85e11d8",null));e["default"]=ut.exports},"2dae":function(t,e,n){"use strict";var i=n("530d"),s=n.n(i);s.a},3451:function(t,e,n){},3470:function(t,e,n){"use strict";e["a"]={computed:{identifier:function(){return{galleryId:this.entry.gallery_id,galleryEntryId:this.entry.id}}}}},"530d":function(t,e,n){},"59f5":function(t,e,n){"use strict";var i=n("ee4c"),s=n.n(i);s.a},"7f17":function(t,e,n){},"81c4":function(t,e,n){},"8f08":function(t,e,n){"use strict";var i=n("b24e"),s=n.n(i);s.a},9556:function(t,e,n){"use strict";var i=n("3451"),s=n.n(i);s.a},a32b:function(t,e,n){},b24e:function(t,e,n){},d39b:function(t,e,n){"use strict";var i=n("a32b"),s=n.n(i);s.a},dbd0:function(t,e,n){"use strict";var i=n("7f17"),s=n.n(i);s.a},e462:function(t,e,n){},ee4c:function(t,e,n){},f8b1:function(t,e,n){"use strict";var i=n("81c4"),s=n.n(i);s.a},f95a:function(t,e,n){"use strict";var i=n("e462"),s=n.n(i);s.a}}]);
//# sourceMappingURL=gallery.3dbf58dc.js.map